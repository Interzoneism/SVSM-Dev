<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:options="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options">
    <!-- Simplified Vintage Story inspired dark theme palette -->
    <Color x:Key="DVS.Text">#FFE9DDCE</Color>
    <Color x:Key="DVS.TextImportant">#FFAD8948</Color>
    <Color x:Key="DVS.Background">#FF342A20</Color>
    <Color x:Key="DVS.Foreground">#FF403529</Color>
    <Color x:Key="DVS.Element">#FF53493E</Color>
    <Color x:Key="DVS.ElementBright">#FFE0CFBB</Color>
    <Color x:Key="DVS.HoverColor">#FFF1D8BF</Color>
    <Color x:Key="DVS.Error">#FF8C3F3F</Color>

    <SolidColorBrush x:Key="DVS.TextBrush" Color="{StaticResource DVS.Text}" />
    <SolidColorBrush x:Key="DVS.TextImportantBrush" Color="{StaticResource DVS.TextImportant}" />
    <SolidColorBrush x:Key="DVS.BackgroundBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="DVS.ForegroundBrush" Color="{StaticResource DVS.Foreground}" />
    <SolidColorBrush x:Key="DVS.ElementBrush" Color="{StaticResource DVS.Element}" />
    <SolidColorBrush x:Key="DVS.ElementBrightBrush" Color="{StaticResource DVS.ElementBright}" />
    <SolidColorBrush x:Key="DVS.HoverBrush" Color="{StaticResource DVS.HoverColor}" />
    <SolidColorBrush x:Key="DVS.ErrorBrush" Color="{StaticResource DVS.Error}" />

    <LinearGradientBrush x:Key="DVS.BorderDepth"
                         StartPoint="0,0"
                         EndPoint="1,1"
                         MappingMode="RelativeToBoundingBox">
        <GradientStop Color="{StaticResource DVS.ElementBright}" Offset="0" />
        <GradientStop Color="{StaticResource DVS.Element}" Offset="1" />
    </LinearGradientBrush>

    <!-- Legacy IMM brushes mapped to the simplified palette -->
    <SolidColorBrush x:Key="IMM.AccentBrush" Color="{StaticResource DVS.ElementBright}" />
    <SolidColorBrush x:Key="IMM.SurfaceBrush" Color="{StaticResource DVS.Foreground}" />
    <SolidColorBrush x:Key="IMM.SurfaceAltBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.DataGridBackgroundBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.NewDataGridBackgroundBrush" Color="{StaticResource DVS.Foreground}" />
    <SolidColorBrush x:Key="IMM.RowsAndCardsBrush" Color="{StaticResource DVS.Foreground}" />
    <SolidColorBrush x:Key="IMM.MenuBackgroundBrush" Color="{StaticResource DVS.Foreground}" />
    <SolidColorBrush x:Key="IMM.BorderBrush" options:Freeze="False" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.WindowBorderBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.RowBorderBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.BorderHoverBrush" Color="{StaticResource DVS.HoverColor}" />
    <SolidColorBrush x:Key="IMM.ButtonBackgroundBrush" options:Freeze="False" Color="{StaticResource DVS.Element}" />
    <SolidColorBrush x:Key="IMM.ButtonHoverBrush" Color="{StaticResource DVS.HoverColor}" />
    <SolidColorBrush x:Key="IMM.ButtonPressedBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.ButtonDisabledBrush" Color="{StaticResource DVS.Background}" Opacity="0.6" />
    <SolidColorBrush x:Key="IMM.ToggleOffBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.ToggleThumbBrush" Color="{StaticResource DVS.ElementBright}" />
    <SolidColorBrush x:Key="IMM.ToggleDisabledBrush" Color="{StaticResource DVS.Background}" Opacity="0.7" />
    <SolidColorBrush x:Key="IMM.ToggleDisabledThumbBrush" Color="{StaticResource DVS.ElementBright}" Opacity="0.5" />
    <SolidColorBrush x:Key="IMM.PlaceholderForegroundBrush" Color="{StaticResource DVS.Text}" Opacity="0.6" />
    <SolidColorBrush x:Key="IMM.ForegroundBrush" Color="{StaticResource DVS.Text}" />
    <SolidColorBrush x:Key="IMM.BodyForegroundBrush" Color="{StaticResource DVS.Text}" />
    <SolidColorBrush x:Key="IMM.ImportantForegroundBrush" Color="{StaticResource DVS.TextImportant}" />
    <SolidColorBrush x:Key="IMM.SelectionForegroundBrush" Color="{StaticResource DVS.TextImportant}" />
    <SolidColorBrush x:Key="IMM.LinkForegroundBrush" Color="{StaticResource DVS.TextImportant}" />
    <SolidColorBrush x:Key="IMM.SuccessBrush" Color="{StaticResource DVS.ElementBright}" />
    <SolidColorBrush x:Key="IMM.RowHoverBrush" Color="{StaticResource DVS.Element}" Opacity="0.3" />
    <SolidColorBrush x:Key="IMM.RowSelectionBrush" Color="{StaticResource DVS.ElementBright}" Opacity="0.35" />
    <SolidColorBrush x:Key="IMM.ScrollBarThumbBrush" Color="{StaticResource DVS.Element}" />
    <SolidColorBrush x:Key="IMM.SearchBoxBackgroundBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.TagBackgroundBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.TagBorderBrush" Color="{StaticResource DVS.ElementBright}" />
    <SolidColorBrush x:Key="IMM.DataGridHeaderBrush" Color="{StaticResource DVS.Element}" />
    <SolidColorBrush x:Key="IMM.DropdownGlyphBrush" Color="{StaticResource DVS.ElementBright}" />
    <SolidColorBrush x:Key="IMM.InputBackgroundBrush" Color="{StaticResource DVS.Background}" />
    <SolidColorBrush x:Key="IMM.WindowBackgroundBrush" Color="{StaticResource DVS.Foreground}" />
    <SolidColorBrush x:Key="IMM.AlertOverlayBrush" Color="{StaticResource DVS.TextImportant}" Opacity="0.45" />
    <SolidColorBrush x:Key="IMM.SuccessOverlayBrush" Color="{StaticResource DVS.ElementBright}" Opacity="0.6" />
    <SolidColorBrush x:Key="IMM.SubtleForegroundBrush" Color="{StaticResource DVS.Text}" Opacity="0.6" />
    <SolidColorBrush x:Key="IMM.ErrorBrush" Color="{StaticResource DVS.Error}" />

    <Style TargetType="{x:Type Menu}">
        <Setter Property="Background" Value="{StaticResource IMM.MenuBackgroundBrush}" />
        <Setter Property="Foreground" Value="{StaticResource IMM.ForegroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource IMM.BorderBrush}" />
    </Style>

    <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
        <Setter Property="Margin" Value="0,6,0,6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Separator}">
                    <Grid Height="8"
                          Background="{StaticResource IMM.MenuBackgroundBrush}"
                          SnapsToDevicePixels="True">
                        <Border Height="1"
                                VerticalAlignment="Center"
                                Background="{StaticResource IMM.BorderBrush}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type MenuItem}">
        <Setter Property="Foreground" Value="{StaticResource IMM.ForegroundBrush}" />
        <Setter Property="Background" Value="{StaticResource IMM.MenuBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource IMM.BorderBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Style.Resources>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter x:Name="HeaderHost"
                                          Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          ContentSource="Header"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Bottom"
                           HorizontalOffset="0"
                           VerticalOffset="0"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource IMM.MenuBackgroundBrush}"
                                BorderBrush="{StaticResource IMM.BorderBrush}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSuspendingPopupAnimation" Value="True">
                        <Setter TargetName="PART_Popup" Property="PopupAnimation" Value="None" />
                    </Trigger>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource IMM.ElementBrush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource IMM.BorderHoverBrush}" />
                        <Setter Property="Foreground" Value="{StaticResource IMM.TextBrush}" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource IMM.ElementBrush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource IMM.BorderHoverBrush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource IMM.SubtleForegroundBrush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Style.Resources>
    </Style>
</ResourceDictionary>
