<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:options="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options">
    <!-- Dark theme palette -->
    <Color x:Key="Color.Text.Primary">#FFE9DDCE</Color>
    <Color x:Key="Color.Text.Emphasis">#FFAD8948</Color>
    <Color x:Key="Color.Surface.Primary">#FF403529</Color>
    <Color x:Key="Color.Surface.Secondary">#FF342A20</Color>
    <Color x:Key="Color.Control.Default">#FF53493E</Color>
    <Color x:Key="Color.Control.Accent">#FFE0CFBB</Color>
    <Color x:Key="Color.Control.Hover">#FFF1D8BF</Color>
    <Color x:Key="Color.Button.Pressed">#FF342A20</Color>
    <Color x:Key="Color.Status.Error">#FF8C3F3F</Color>

    <!-- Text -->
    <SolidColorBrush x:Key="Text_Primary_Brush" Color="{StaticResource Color.Text.Primary}" />
    <SolidColorBrush x:Key="Text_Body_Brush" Color="{StaticResource Color.Text.Primary}" />
    <SolidColorBrush x:Key="Text_Emphasis_Brush" Color="{StaticResource Color.Text.Emphasis}" />
    <SolidColorBrush x:Key="Text_Subtle_Brush" Color="{StaticResource Color.Text.Primary}" Opacity="0.6" />
    <SolidColorBrush x:Key="Text_Placeholder_Brush" Color="{StaticResource Color.Text.Primary}" Opacity="0.6" />
    <SolidColorBrush x:Key="Text_Link_Brush" Color="{StaticResource Color.Text.Emphasis}" />
    <SolidColorBrush x:Key="Text_Selection_Foreground_Brush" Color="{StaticResource Color.Text.Emphasis}" />
    <SolidColorBrush x:Key="Text_Caret_Brush" Color="{StaticResource Color.Control.Accent}" />

    <!-- Window and layout surfaces -->
    <SolidColorBrush x:Key="Window_Background_Brush" Color="{StaticResource Color.Surface.Primary}" />
    <SolidColorBrush x:Key="Window_Border_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="Panel_Primary_Background_Brush" Color="{StaticResource Color.Surface.Primary}" />
    <SolidColorBrush x:Key="Panel_Secondary_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" />

    <!-- Borders -->
    <SolidColorBrush x:Key="Border_Default_Brush" options:Freeze="False" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="Border_Hover_Brush" Color="{StaticResource Color.Control.Hover}" />
    <SolidColorBrush x:Key="DataGrid_Row_Border_Brush" Color="{StaticResource Color.Surface.Secondary}" />

    <!-- Buttons -->
    <SolidColorBrush x:Key="Button_General_Background_Brush" options:Freeze="False" Color="{StaticResource Color.Control.Default}" />
    <SolidColorBrush x:Key="Button_General_Border_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="Button_General_Hover_Background_Brush" Color="{StaticResource Color.Control.Hover}" />
    <SolidColorBrush x:Key="Button_General_Pressed_Background_Brush" Color="{StaticResource Color.Button.Pressed}" />
    <SolidColorBrush x:Key="Button_General_Disabled_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" Opacity="0.6" />
    <SolidColorBrush x:Key="Accent_Primary_Brush" Color="{StaticResource Color.Control.Accent}" />

    <!-- Toggle switches and toggle buttons -->
    <SolidColorBrush x:Key="ToggleSwitch_Track_Off_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="ToggleSwitch_Track_On_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleSwitch_Track_Disabled_Brush" Color="{StaticResource Color.Surface.Secondary}" Opacity="0.7" />
    <SolidColorBrush x:Key="ToggleSwitch_Thumb_Normal_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleSwitch_Thumb_Disabled_Brush" Color="{StaticResource Color.Control.Accent}" Opacity="0.5" />
    <SolidColorBrush x:Key="ToggleSwitch_Focus_Border_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleSwitch_Hover_Border_Brush" Color="{StaticResource Color.Control.Hover}" />
    <SolidColorBrush x:Key="ToggleButton_Checked_Background_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleButton_Checked_Border_Brush" Color="{StaticResource Color.Control.Accent}" />

    <!-- Menu -->
    <SolidColorBrush x:Key="Menu_Background_Brush" Color="{StaticResource Color.Surface.Primary}" />
    <SolidColorBrush x:Key="Menu_Border_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="Menu_Item_Hover_Background_Brush" Color="{StaticResource Color.Control.Default}" />
    <SolidColorBrush x:Key="Menu_Item_Submenu_Background_Brush" Color="{StaticResource Color.Surface.Primary}" />

    <!-- Inputs -->
    <SolidColorBrush x:Key="TextInput_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="TextInput_Focus_Border_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="TextInput_Selection_Background_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="SearchBox_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" />

    <!-- ComboBox -->
    <SolidColorBrush x:Key="ComboBox_Glyph_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="ComboBox_Popup_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="ComboBox_Popup_Border_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="ComboBox_Open_Border_Brush" Color="{StaticResource Color.Control.Accent}" />

    <!-- Data grid -->
    <SolidColorBrush x:Key="DataGrid_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="DataGrid_AlternateRow_Background_Brush" Color="{StaticResource Color.Surface.Primary}" />
    <SolidColorBrush x:Key="DataGrid_Header_Background_Brush" Color="{StaticResource Color.Control.Default}" />
    <SolidColorBrush x:Key="DataGrid_Row_Hover_Brush" Color="{StaticResource Color.Control.Default}" Opacity="0.3" />
    <SolidColorBrush x:Key="DataGrid_Row_Selected_Brush" Color="{StaticResource Color.Control.Accent}" Opacity="0.35" />

    <!-- Tags and badges -->
    <SolidColorBrush x:Key="Tag_Badge_Background_Brush" Color="{StaticResource Color.Surface.Secondary}" />
    <SolidColorBrush x:Key="Tag_Badge_Border_Brush" Color="{StaticResource Color.Control.Accent}" />

    <!-- Status and overlays -->
    <SolidColorBrush x:Key="Status_Success_Brush" Color="{StaticResource Color.Control.Accent}" />
    <SolidColorBrush x:Key="Status_Error_Brush" Color="{StaticResource Color.Status.Error}" />
    <SolidColorBrush x:Key="Overlay_Warning_Background_Brush" Color="{StaticResource Color.Text.Emphasis}" Opacity="0.45" />
    <SolidColorBrush x:Key="Overlay_Success_Background_Brush" Color="{StaticResource Color.Control.Accent}" Opacity="0.6" />

    <!-- Miscellaneous -->
    <SolidColorBrush x:Key="ScrollBar_Thumb_Brush" Color="{StaticResource Color.Control.Default}" />
    <SolidColorBrush x:Key="Selection_Background_Brush" Color="{StaticResource Color.Control.Accent}" />

    <Style TargetType="{x:Type Menu}">
        <Setter Property="Background" Value="{StaticResource Menu_Background_Brush}" />
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Border_Default_Brush}" />
    </Style>

    <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
        <Setter Property="Margin" Value="0,6,0,6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Separator}">
                    <Grid Height="8"
                          Background="{StaticResource Menu_Background_Brush}"
                          SnapsToDevicePixels="True">
                        <Border Height="1"
                                VerticalAlignment="Center"
                                Background="{StaticResource Border_Default_Brush}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type MenuItem}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource Menu_Background_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Border_Default_Brush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="12,6,12,6" />
        <Style.Resources>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter x:Name="HeaderHost"
                                          Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          ContentSource="Header"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Bottom"
                           HorizontalOffset="0"
                           VerticalOffset="0"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource Menu_Background_Brush}"
                                BorderBrush="{StaticResource Border_Default_Brush}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSuspendingPopupAnimation" Value="True">
                        <Setter TargetName="PART_Popup" Property="PopupAnimation" Value="None" />
                    </Trigger>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelItemTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          ContentSource="Header"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.SubmenuHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <Grid VerticalAlignment="Center"
                              Grid.IsSharedSizeScope="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemCheckColumnGroup" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock x:Name="CheckMark"
                                       Margin="0,0,8,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       Text="â˜"
                                       Visibility="Collapsed" />
                            <ContentPresenter x:Name="Icon"
                                              Grid.Column="1"
                                              Margin="0,0,8,0"
                                              VerticalAlignment="Center"
                                              ContentSource="Icon"
                                              RecognizesAccessKey="True" />
                            <ContentPresenter x:Name="HeaderHost"
                                              Grid.Column="2"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"
                                              ContentSource="Header"
                                              TextElement.Foreground="{TemplateBinding Foreground}" />
                            <TextBlock x:Name="InputGestureText"
                                       Grid.Column="3"
                                       Margin="24,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       Text="{TemplateBinding InputGestureText}" />
                            <Path x:Name="Arrow"
                                  Grid.Column="4"
                                  Margin="12,0,0,0"
                                  VerticalAlignment="Center"
                                  Fill="{StaticResource ComboBox_Glyph_Brush}"
                                  Data="M 0 0 L 4 4 L 0 8 Z"
                                  Visibility="Collapsed" />
                        </Grid>
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Right"
                           HorizontalOffset="0"
                           VerticalOffset="-1"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource Menu_Background_Brush}"
                                BorderBrush="{StaticResource Border_Default_Brush}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger SourceName="Icon" Property="Content" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="{x:Null}">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="IsCheckable" Value="True">
                        <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="CheckMark" Property="Text" Value="ðŸ—¹" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="False">
                        <Setter TargetName="CheckMark" Property="Text" Value="â˜" />
                    </Trigger>
                    <Trigger Property="HasItems" Value="True">
                        <Setter TargetName="Arrow" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource Text_Primary_Brush}" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource Text_Primary_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.SubmenuItemTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <Grid VerticalAlignment="Center"
                              Grid.IsSharedSizeScope="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemCheckColumnGroup" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock x:Name="CheckMark"
                                       Margin="0,0,8,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       Text="â˜"
                                       Visibility="Collapsed" />
                            <ContentPresenter x:Name="Icon"
                                              Grid.Column="1"
                                              Margin="0,0,8,0"
                                              VerticalAlignment="Center"
                                              ContentSource="Icon"
                                              RecognizesAccessKey="True" />
                            <ContentPresenter x:Name="HeaderHost"
                                              Grid.Column="2"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"
                                              ContentSource="Header"
                                              TextElement.Foreground="{TemplateBinding Foreground}" />
                            <TextBlock x:Name="InputGestureText"
                                       Grid.Column="3"
                                       Margin="24,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       Text="{TemplateBinding InputGestureText}" />
                            <Path x:Name="Arrow"
                                  Grid.Column="4"
                                  Margin="12,0,0,0"
                                  VerticalAlignment="Center"
                                  Fill="{StaticResource ComboBox_Glyph_Brush}"
                                  Data="M 0 0 L 4 4 L 0 8 Z"
                                  Visibility="Collapsed" />
                        </Grid>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger SourceName="Icon" Property="Content" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="{x:Null}">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="IsCheckable" Value="True">
                        <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="CheckMark" Property="Text" Value="ðŸ—¹" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="False">
                        <Setter TargetName="CheckMark" Property="Text" Value="â˜" />
                    </Trigger>
                    <Trigger Property="HasItems" Value="True">
                        <Setter TargetName="Arrow" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource Text_Primary_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Style.Resources>
    </Style>
</ResourceDictionary>
