<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:options="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options">
    <!-- Dark theme palette -->
    <Color x:Key="Palette.Text.Primary">#FFe9ddce</Color>
    <Color x:Key="Palette.Text.Emphasis">#FFAD8948</Color>
    <Color x:Key="Palette.Surface.Bright">#FF6b563e</Color>
    <Color x:Key="Palette.Surface.Dark">#FF3e3226</Color>
    <Color x:Key="Palette.Surface.Header">#FF453424</Color>
    <Color x:Key="Palette.Control.Accent">#FFE0CFBB</Color>
    <Color x:Key="Palette.Control.Hover">#3FFFFFFF</Color>
    <Color x:Key="Palette.Status.Error">#FF8C3F3F</Color>
    <Color x:Key="Palette.Shadow.Default">#33000000</Color>
    <Color x:Key="Palette.Element.Background">#FF403529</Color>                

    <Color x:Key="Color.Border.Default">#FF342A20</Color>
    <Color x:Key="Color.TextInput.Background">#FF342A20</Color>
    <Color x:Key="Color.TextInput.FocusBackground">#FFE0CFBB</Color>
    <Color x:Key="Color.TextInput.FocusBorder">#FFE0CFBB</Color>
    <Color x:Key="Color.ToolTip.Background">#FF4C4034</Color>
    <Color x:Key="Color.ToolTip.Border">#FFE0CFBB</Color>
    <Color x:Key="Color.ToolTip.Foreground">#FFF6E8D7</Color>

    <!-- Text -->
    <SolidColorBrush x:Key="Text_Primary_Brush" Color="{StaticResource Palette.Text.Primary}" />
    <SolidColorBrush x:Key="Text_Body_Brush" Color="{StaticResource Palette.Text.Primary}" />
    <SolidColorBrush x:Key="Text_Emphasis_Brush" Color="{StaticResource Palette.Text.Emphasis}" />
    <SolidColorBrush x:Key="Text_Subtle_Brush" Color="{StaticResource Palette.Text.Primary}" Opacity="0.6" />
    <SolidColorBrush x:Key="Text_Placeholder_Brush" Color="{StaticResource Palette.Text.Primary}" Opacity="0.6" />
    <SolidColorBrush x:Key="Text_Link_Brush" Color="{StaticResource Palette.Text.Emphasis}" />
    <SolidColorBrush x:Key="Text_Selection_Foreground_Brush" Color="{StaticResource Palette.Text.Primary}" />
    <SolidColorBrush x:Key="Text_Caret_Brush" Color="{StaticResource Palette.Text.Primary}" />
    <SolidColorBrush x:Key="Text_ToolTip_Brush" Color="{StaticResource Palette.Text.Primary}" />

    <!-- Window and layout surfaces -->
    <SolidColorBrush x:Key="Window_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />
    <SolidColorBrush x:Key="Window_Border_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="Panel_Primary_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />
    <SolidColorBrush x:Key="Panel_Secondary_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />

    <!-- Mod database surfaces -->
    <SolidColorBrush x:Key="ModDatabase_Card_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />
    <SolidColorBrush x:Key="ModDatabase_Card_Disabled_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ModDatabase_Grid_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />

    <!-- Shadows -->
    <SolidColorBrush x:Key="DataGrid_Row_Shadow_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ModDatabase_Card_Shadow_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ModDatabase_Details_Shadow_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="Dialog_Content_Shadow_Brush" Color="{StaticResource Palette.Shadow.Default}" />

    <!-- Borders -->
    <SolidColorBrush x:Key="Border_Default_Brush" options:Freeze="False" Color="{StaticResource Color.Border.Default}" />
    <SolidColorBrush x:Key="Border_Hover_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="DataGrid_Row_Border_Brush" Color="{StaticResource Palette.Surface.Dark}" />

    <!-- Buttons -->
    <SolidColorBrush x:Key="Button_General_Background_Brush" options:Freeze="False" Color="{StaticResource Palette.Surface.Header}" />
    <SolidColorBrush x:Key="Button_General_Border_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="Button_General_Hover_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="Button_General_Pressed_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="Button_General_Disabled_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" Opacity="0.6" />
    <SolidColorBrush x:Key="Accent_Primary_Brush" Color="{StaticResource Palette.Control.Accent}" />

    <!-- Text inputs -->
    <SolidColorBrush x:Key="TextInput_Focus_Background_Brush" Color="{StaticResource Color.TextInput.FocusBackground}" />

    <!-- Toggle switches and toggle buttons -->
    <SolidColorBrush x:Key="ToggleSwitch_Track_Off_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ToggleSwitch_Track_On_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleSwitch_Track_Disabled_Brush" Color="{StaticResource Palette.Surface.Dark}" Opacity="0.7" />
    <SolidColorBrush x:Key="ToggleSwitch_Thumb_Normal_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleSwitch_Thumb_Disabled_Brush" Color="{StaticResource Palette.Control.Accent}" Opacity="0.5" />
    <SolidColorBrush x:Key="ToggleSwitch_Focus_Border_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleSwitch_Hover_Border_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ToggleButton_Checked_Background_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ToggleButton_Checked_Border_Brush" Color="{StaticResource Palette.Control.Accent}" />

    <!-- Menu -->
    <SolidColorBrush x:Key="Menu_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />
    <SolidColorBrush x:Key="Menu_Border_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="Menu_Item_Hover_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="Menu_Item_Submenu_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />

    <!-- Inputs -->
    <SolidColorBrush x:Key="TextInput_Background_Brush" Color="{StaticResource Color.TextInput.Background}" />
    <SolidColorBrush x:Key="TextInput_Focus_Border_Brush" Color="{StaticResource Color.TextInput.FocusBorder}" />
    <SolidColorBrush x:Key="TextInput_Selection_Background_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="SearchBox_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />

    <!-- Tooltips -->
    <SolidColorBrush x:Key="ToolTip_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ToolTip_Border_Brush" Color="{StaticResource Palette.Surface.Bright}" />

    <!-- ComboBox -->
    <SolidColorBrush x:Key="ComboBox_Background_Brush" Color="{StaticResource Palette.Surface.Header}" />
    <SolidColorBrush x:Key="ComboBox_Border_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ComboBox_Hover_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ComboBox_Hover_Border_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ComboBox_Disabled_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ComboBox_Disabled_Border_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ComboBox_Item_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ComboBox_Item_Hover_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ComboBox_Item_Selected_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ComboBox_Open_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ComboBox_Glyph_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ComboBox_Popup_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ComboBox_Popup_Border_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="ComboBox_Open_Border_Brush" Color="{StaticResource Palette.Control.Accent}" />

    <!-- Data grid -->
    <SolidColorBrush x:Key="DataGrid_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="DataGrid_AlternateRow_Background_Brush" Color="{StaticResource Palette.Surface.Bright}" />
    <SolidColorBrush x:Key="DataGrid_Header_Background_Brush" Color="{StaticResource Palette.Surface.Header}" />
    <SolidColorBrush x:Key="DataGrid_Row_Hover_Brush" Color="{StaticResource Palette.Surface.Header}" Opacity="0.3" />
    <SolidColorBrush x:Key="DataGrid_Row_Selected_Brush" Color="{StaticResource Palette.Control.Accent}" Opacity="0.35" />
    <SolidColorBrush x:Key="DataGrid_Header_Hover_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />

    <!-- Tags and badges -->
    <SolidColorBrush x:Key="Tag_Badge_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="Tag_Badge_Border_Brush" Color="{StaticResource Palette.Control.Accent}" />

    <!-- Status and overlays -->
    <SolidColorBrush x:Key="Status_Success_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="Status_Error_Brush" Color="{StaticResource Palette.Status.Error}" />
    <SolidColorBrush x:Key="Overlay_Warning_Background_Brush" Color="{StaticResource Palette.Text.Emphasis}" Opacity="0.45" />
    <SolidColorBrush x:Key="Overlay_Success_Background_Brush" Color="{StaticResource Palette.Control.Accent}" Opacity="0.6" />

    <!-- Miscellaneous -->
    <SolidColorBrush x:Key="ScrollBar_Thumb_Brush" Color="{StaticResource Palette.Surface.Header}" />
    <SolidColorBrush x:Key="Selection_Background_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="Dialog_TextBox_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />
    <SolidColorBrush x:Key="Dialog_TextBox_Border_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="Dialog_TextBox_Selection_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="Dialog_TextBox_SelectionText_Brush" Color="{StaticResource Palette.Text.Emphasis}" />
    <SolidColorBrush x:Key="Dialog_TextBox_Caret_Brush" Color="{StaticResource Palette.Control.Accent}" />

    <!-- Mod configuration tree -->
    <SolidColorBrush x:Key="ModConfig_TreeNode_Hover_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ModConfig_TreeNode_Selected_Background_Brush" Color="{StaticResource Palette.Control.Accent}" />
    <SolidColorBrush x:Key="ModConfig_Value_Hover_Background_Brush" Color="{StaticResource Palette.Control.Hover}" />
    <SolidColorBrush x:Key="ModConfig_Value_Selected_Background_Brush" Color="{StaticResource Palette.Surface.Dark}" />

    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{DynamicResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type TextBox}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource TextInput_Background_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Border_Default_Brush}" />
        <Setter Property="SelectionBrush" Value="{StaticResource TextInput_Selection_Background_Brush}" />
        <Setter Property="SelectionTextBrush" Value="{StaticResource Text_Selection_Foreground_Brush}" />
        <Setter Property="CaretBrush" Value="{StaticResource Text_Caret_Brush}" />
    </Style>

    <Style TargetType="{x:Type PasswordBox}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource TextInput_Background_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Border_Default_Brush}" />
        <Setter Property="SelectionBrush" Value="{StaticResource TextInput_Selection_Background_Brush}" />
        <Setter Property="CaretBrush" Value="{StaticResource Text_Caret_Brush}" />
    </Style>

    <Style TargetType="{x:Type ComboBox}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource ComboBox_Background_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ComboBox_Border_Brush}" />
    </Style>

    <Style TargetType="{x:Type ComboBoxItem}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource ComboBox_Item_Background_Brush}" />
    </Style>

    <Style TargetType="{x:Type ListBox}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource Panel_Primary_Background_Brush}" />
    </Style>

    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type ListView}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type TreeView}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type TreeViewItem}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type Label}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type CheckBox}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type RadioButton}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type ToggleButton}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type DataGrid}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
    </Style>

    <Style TargetType="{x:Type Hyperlink}">
        <Setter Property="Foreground" Value="{StaticResource Text_Link_Brush}" />
    </Style>

    <Style TargetType="{x:Type ToolTip}">
        <Setter Property="Background" Value="{StaticResource ToolTip_Background_Brush}" />
        <Setter Property="Foreground" Value="{StaticResource Text_ToolTip_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ToolTip_Border_Brush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Style.Resources>
            <SolidColorBrush x:Key="Text_Primary_Brush" Color="{StaticResource Color.ToolTip.Foreground}" />
            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="{StaticResource Text_ToolTip_Brush}" />
            </Style>
        </Style.Resources>
    </Style>

    <Style TargetType="{x:Type ContextMenu}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource Menu_Background_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Menu_Border_Brush}" />
    </Style>

    <Style TargetType="{x:Type Menu}">
        <Setter Property="Background" Value="{StaticResource Menu_Background_Brush}" />
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Border_Default_Brush}" />
    </Style>

    <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
        <Setter Property="Margin" Value="0,6,0,6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Separator}">
                    <Grid Height="8"
                          Background="{StaticResource Menu_Background_Brush}"
                          SnapsToDevicePixels="True">
                        <Border Height="1"
                                VerticalAlignment="Center"
                                Background="{StaticResource Border_Default_Brush}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type MenuItem}">
        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
        <Setter Property="Background" Value="{StaticResource Menu_Background_Brush}" />
        <Setter Property="BorderBrush" Value="{StaticResource Border_Default_Brush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="12,6,12,6" />
        <Style.Resources>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter x:Name="HeaderHost"
                                          Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          ContentSource="Header"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Bottom"
                           HorizontalOffset="0"
                           VerticalOffset="0"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource Panel_Primary_Background_Brush}"
                                BorderBrush="{StaticResource Border_Default_Brush}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelItemTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          ContentSource="Header"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.SubmenuHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <Grid VerticalAlignment="Center"
                              Grid.IsSharedSizeScope="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemCheckColumnGroup" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup" />
                            </Grid.ColumnDefinitions>
                            <TextBlock x:Name="CheckMark"
                                       Margin="0,0,8,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       Text="â˜"
                                       Visibility="Collapsed" />
                            <ContentPresenter x:Name="Icon"
                                              Grid.Column="1"
                                              Margin="0,0,8,0"
                                              VerticalAlignment="Center"
                                              ContentSource="Icon"
                                              RecognizesAccessKey="True" />
                            <ContentPresenter x:Name="HeaderHost"
                                              Grid.Column="2"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"
                                              ContentSource="Header"
                                              TextElement.Foreground="{TemplateBinding Foreground}" />
                            <TextBlock x:Name="InputGestureText"
                                       Grid.Column="3"
                                       Margin="24,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       Text="{TemplateBinding InputGestureText}" />
                        </Grid>
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Right"
                           HorizontalOffset="0"
                           VerticalOffset="-1"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource Menu_Background_Brush}"
                                BorderBrush="{StaticResource Border_Default_Brush}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger SourceName="Icon" Property="Content" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="{x:Null}">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="IsCheckable" Value="True">
                        <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="CheckMark" Property="Text" Value="ðŸ—¹" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="False">
                        <Setter TargetName="CheckMark" Property="Text" Value="â˜" />
                    </Trigger>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                        <Setter Property="Foreground" Value="{StaticResource Text_Primary_Brush}" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.SubmenuItemTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <Grid VerticalAlignment="Center"
                              Grid.IsSharedSizeScope="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemCheckColumnGroup" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup" />
                            </Grid.ColumnDefinitions>
                            <TextBlock x:Name="CheckMark"
                                       Margin="0,0,8,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       Text="â˜"
                                       Visibility="Collapsed" />
                            <ContentPresenter x:Name="Icon"
                                              Grid.Column="1"
                                              Margin="0,0,8,0"
                                              VerticalAlignment="Center"
                                              ContentSource="Icon"
                                              RecognizesAccessKey="True" />
                            <ContentPresenter x:Name="HeaderHost"
                                              Grid.Column="2"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"
                                              ContentSource="Header"
                                              TextElement.Foreground="{TemplateBinding Foreground}" />
                            <TextBlock x:Name="InputGestureText"
                                       Grid.Column="3"
                                       Margin="24,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       Text="{TemplateBinding InputGestureText}" />
                        </Grid>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger SourceName="Icon" Property="Content" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="InputGestureText" Value="{x:Null}">
                        <Setter TargetName="InputGestureText" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="IsCheckable" Value="True">
                        <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="CheckMark" Property="Text" Value="ðŸ—¹" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="False">
                        <Setter TargetName="CheckMark" Property="Text" Value="â˜" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Item_Hover_Background_Brush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Border_Hover_Brush}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Text_Subtle_Brush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Style.Resources>
    </Style>
</ResourceDictionary>
