<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:options="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
                    xmlns:ui="http://schemas.modernwpf.com/2019">
    <!-- ========================================================= -->
    <!-- Palette: base colours used throughout the dark VS theme. -->
    <!-- ========================================================= -->
    <Color x:Key="Palette.ColorBackgroundDark">#FF403529</Color>
    <Color x:Key="Palette.ColorBackgroundMedium">#FF4D3D2D</Color>
    <Color x:Key="Palette.ColorBackgroundLight">#FF5A4530</Color>
    <Color x:Key="Palette.ColorElement">#FF453525</Color>
    <Color x:Key="Palette.ColorActive">#FF479BBE</Color>
    <Color x:Key="Palette.ColorDisabled">#FF332A21</Color>
    <Color x:Key="Palette.ColorTextPrimary">#FFC8BCAE</Color>
    <Color x:Key="Palette.ColorTextLink">#FF479BBE</Color>
    <Color x:Key="Palette.ColorBevelLight">#80FFFFFF</Color>
    <Color x:Key="Palette.ColorBevelDark">#40000000</Color>

    <!-- ====================================================== -->
    <!-- Window shell and shared panel surfaces (Main windows). -->
    <!-- ====================================================== -->
    <SolidColorBrush x:Key="Brush.Window.Shell.Background.Solid" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.Window.Shell.Border" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.Panel.Primary.Background.Solid" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.Panel.Secondary.Background.Solid" Color="{StaticResource Palette.ColorBackgroundDark}" />

    <!-- =============================== -->
    <!-- Text and typography colouring. -->
    <!-- =============================== -->
    <SolidColorBrush x:Key="Brush.Text.Primary" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.Text.Body" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.Text.Emphasis" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.Text.Subtle" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0.7" />
    <SolidColorBrush x:Key="Brush.Text.Placeholder" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0.45" />
    <SolidColorBrush x:Key="Brush.Text.Link" Color="{StaticResource Palette.ColorTextLink}" />
    <SolidColorBrush x:Key="Brush.Text.SelectionForeground" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.Text.Caret" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.ToolTip.Text" Color="{StaticResource Palette.ColorTextPrimary}" />

    <!-- ============================================ -->
    <!-- Primary buttons and toggle button surfaces. -->
    <!-- ============================================ -->
    <SolidColorBrush x:Key="Brush.Button.Primary.Background.Normal" options:Freeze="False" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.Button.Primary.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" />
    <SolidColorBrush x:Key="Brush.Button.Primary.Background.Pressed" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.Button.Primary.Background.Disabled" Color="{StaticResource Palette.ColorDisabled}" Opacity="0.6" />
    <SolidColorBrush x:Key="Brush.Button.Primary.Border.Normal" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0.6" />
    <SolidColorBrush x:Key="Brush.Button.Bevel.Light" Color="{StaticResource Palette.ColorBevelLight}" />
    <SolidColorBrush x:Key="Brush.Button.Bevel.Dark" Color="{StaticResource Palette.ColorBevelDark}" />
    <SolidColorBrush x:Key="Brush.Accent.Primary" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.ToggleButton.Background.Checked" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.ToggleButton.Border.Checked" Color="{StaticResource Palette.ColorActive}" />

    <!-- ============================================ -->
    <!-- Toggle switches (App.xaml toggle controls). -->
    <!-- ============================================ -->
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Track.Background.Off" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Track.Background.On" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Track.Background.Disabled" Color="{StaticResource Palette.ColorDisabled}" Opacity="0.7" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Thumb.Background.Normal" Color="{StaticResource Palette.ColorBackgroundLight}" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Thumb.Background.On" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Thumb.Background.Disabled" Color="{StaticResource Palette.ColorDisabled}" Opacity="0.5" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Focus.Border" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.ToggleSwitch.Hover.Border" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0.7" />

    <!-- =================================== -->
    <!-- Text inputs and the search controls. -->
    <!-- =================================== -->
    <SolidColorBrush x:Key="Brush.TextInput.Background.Normal" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.TextInput.Background.Focused" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.TextInput.Border.Focused" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.TextInput.SelectionBackground" Color="{StaticResource Palette.ColorActive}" Opacity="0.35" />
    <SolidColorBrush x:Key="Brush.SearchBox.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.SunkenSurface.Bevel.Light" Color="{StaticResource Palette.ColorBevelLight}" />
    <SolidColorBrush x:Key="Brush.SunkenSurface.Bevel.Dark" Color="{StaticResource Palette.ColorBevelDark}" />

    <!-- ========================= -->
    <!-- Combo box colour system. -->
    <!-- ========================= -->
    <SolidColorBrush x:Key="Brush.ComboBox.Background.Normal" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Background.Disabled" Color="{StaticResource Palette.ColorDisabled}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Background.Open" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Border.Normal" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Border.Hover" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0" />
    <SolidColorBrush x:Key="Brush.ComboBox.Border.Disabled" Color="{StaticResource Palette.ColorDisabled}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Border.Open" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Item.Background.Normal" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Item.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" Opacity="0.7" />
    <SolidColorBrush x:Key="Brush.ComboBox.Item.Background.Selected" Color="{StaticResource Palette.ColorActive}" Opacity="0.35" />
    <SolidColorBrush x:Key="Brush.ComboBox.Glyph" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Popup.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.ComboBox.Popup.Border" Color="{StaticResource Palette.ColorBackgroundMedium}" />

    <!-- ===================== -->
    <!-- Data grid formatting. -->
    <!-- ===================== -->
    <SolidColorBrush x:Key="Brush.DataGrid.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.ModTabs.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.DataGrid.Row.Background.Alternate" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.DataGrid.Row.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" Opacity="0.3" />
    <SolidColorBrush x:Key="Brush.DataGrid.Row.Background.Selected" Color="{StaticResource Palette.ColorActive}" Opacity="0.35" />
    <SolidColorBrush x:Key="Brush.DataGrid.RowBorder" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.DataGrid.Header.Background" Color="{StaticResource Palette.ColorBackgroundLight}" />
    <SolidColorBrush x:Key="Brush.DataGrid.Header.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" />
    <SolidColorBrush x:Key="Brush.DataGrid.RowShadow" Color="{StaticResource Palette.ColorBackgroundDark}" Opacity="0.6" />

    <!-- ===================================== -->
    <!-- Menu, context menu, and tool tip UI. -->
    <!-- ===================================== -->
    <SolidColorBrush x:Key="Brush.Menu.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.Menu.Border" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.Menu.Item.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" />
    <SolidColorBrush x:Key="Brush.Menu.Submenu.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.ToolTip.Background" Color="{StaticResource Palette.ColorBackgroundDark}" />
    <SolidColorBrush x:Key="Brush.ToolTip.Border" Color="{StaticResource Palette.ColorBackgroundMedium}" />

    <!-- ================================== -->
    <!-- Mod list cards, grids, and shadows -->
    <!-- ================================== -->
    <SolidColorBrush x:Key="Brush.ModCard.Background.Active.Solid" Color="{StaticResource Palette.ColorElement}" />
    <StaticResource x:Key="Brush.ModCard.Background.Active" ResourceKey="Brush.ModCard.Background.Active.Solid" />

    <SolidColorBrush x:Key="Brush.ModCard.Background.Disabled.Solid" Color="{StaticResource Palette.ColorDisabled}" />
    <StaticResource x:Key="Brush.ModCard.Background.Disabled" ResourceKey="Brush.ModCard.Background.Disabled.Solid" />

    <SolidColorBrush x:Key="Brush.ModGrid.Background.Solid" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <StaticResource x:Key="Brush.ModGrid.Background" ResourceKey="Brush.ModGrid.Background.Solid" />

    <SolidColorBrush x:Key="Brush.ModCard.Shadow" Color="{StaticResource Palette.ColorBackgroundDark}" Opacity="0.7" />
    <SolidColorBrush x:Key="Brush.ModDetails.Shadow" Color="{StaticResource Palette.ColorBackgroundDark}" Opacity="0.7" />

    <!-- =============================== -->
    <!-- Installed mods list formatting. -->
    <!-- =============================== -->
    <SolidColorBrush x:Key="Brush.InstalledMod.Row.Background" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.InstalledMod.Row.Border" Color="{StaticResource Palette.ColorBackgroundDark}" />

    <!-- ============================== -->
    <!-- Tags, statuses, and overlays. -->
    <!-- ============================== -->
    <SolidColorBrush x:Key="Brush.Tag.Badge.Background" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.Tag.Badge.Border" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0.7" />
    <SolidColorBrush x:Key="Brush.Status.Success" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.Status.Error" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.Overlay.Warning.Background" Color="{StaticResource Palette.ColorElement}" Opacity="0.45" />
    <SolidColorBrush x:Key="Brush.Overlay.Success.Background" Color="{StaticResource Palette.ColorActive}" Opacity="0.6" />

    <!-- ================================ -->
    <!-- Dialog specific text box styles -->
    <!-- ================================ -->
    <SolidColorBrush x:Key="Brush.Dialog.TextBox.Background" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.Dialog.TextBox.Border" Color="{StaticResource Palette.ColorActive}" />
    <SolidColorBrush x:Key="Brush.Dialog.TextBox.SelectionBackground" Color="{StaticResource Palette.ColorActive}" Opacity="0.35" />
    <SolidColorBrush x:Key="Brush.Dialog.TextBox.SelectionForeground" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.Dialog.TextBox.Caret" Color="{StaticResource Palette.ColorTextPrimary}" />
    <SolidColorBrush x:Key="Brush.Dialog.ContentShadow" Color="{StaticResource Palette.ColorBackgroundDark}" Opacity="0.6" />

    <!-- ============================== -->
    <!-- Miscellaneous global brushes. -->
    <!-- ============================== -->
    <SolidColorBrush x:Key="Brush.Border.Default" options:Freeze="False" Color="{StaticResource Palette.ColorBackgroundMedium}" />
    <SolidColorBrush x:Key="Brush.Border.Hover" Color="{StaticResource Palette.ColorTextPrimary}" Opacity="0"/>
    <SolidColorBrush x:Key="Brush.ScrollBar.Thumb" Color="{StaticResource Palette.ColorElement}" />
    <SolidColorBrush x:Key="Brush.Selection.Background" Color="{StaticResource Palette.ColorActive}" Opacity="0.35" />

    <!-- ================================== -->
    <!-- Mod configuration tree formatting -->
    <!-- ================================== -->
    <SolidColorBrush x:Key="Brush.ModConfig.TreeNode.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" Opacity="0.4" />
    <SolidColorBrush x:Key="Brush.ModConfig.TreeNode.Background.Selected" Color="{StaticResource Palette.ColorActive}" Opacity="0.35" />
    <SolidColorBrush x:Key="Brush.ModConfig.Value.Background.Hover" Color="{StaticResource Palette.ColorBackgroundLight}" Opacity="0.5" />
    <SolidColorBrush x:Key="Brush.ModConfig.Value.Background.Selected" Color="{StaticResource Palette.ColorBackgroundDark}" />

    <!-- ==================== -->
    <!-- Control base styles -->
    <!-- ==================== -->
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type TextBox}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.TextInput.Background.Normal}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border.Default}" />
        <Setter Property="SelectionBrush" Value="{StaticResource Brush.TextInput.SelectionBackground}" />
        <Setter Property="SelectionTextBrush" Value="{StaticResource Brush.Text.SelectionForeground}" />
        <Setter Property="CaretBrush" Value="{StaticResource Brush.Text.Caret}" />
    </Style>

    <Style TargetType="{x:Type PasswordBox}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.TextInput.Background.Normal}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border.Default}" />
        <Setter Property="SelectionBrush" Value="{StaticResource Brush.TextInput.SelectionBackground}" />
        <Setter Property="CaretBrush" Value="{StaticResource Brush.Text.Caret}" />
    </Style>

    <Style TargetType="{x:Type ComboBox}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.ComboBox.Background.Normal}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.ComboBox.Border.Normal}" />
    </Style>

    <Style TargetType="{x:Type ComboBoxItem}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.ComboBox.Item.Background.Normal}" />
    </Style>

    <Style TargetType="{x:Type ListBox}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.Panel.Primary.Background.Solid}" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="ui:ControlHelper.CornerRadius" Value="6" />
        <Setter Property="Template" Value="{DynamicResource IMM.SunkenListControlTemplate}" />
    </Style>

    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type ListView}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.Panel.Primary.Background.Solid}" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="ui:ControlHelper.CornerRadius" Value="6" />
        <Setter Property="Template" Value="{DynamicResource IMM.SunkenListControlTemplate}" />
    </Style>

    <Style TargetType="{x:Type TreeView}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type TreeViewItem}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type Label}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type CheckBox}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type RadioButton}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type ToggleButton}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type DataGrid}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
    </Style>

    <Style TargetType="{x:Type Hyperlink}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Link}" />
    </Style>

    <Style TargetType="{x:Type ToolTip}">
        <Setter Property="Background" Value="{StaticResource Brush.ToolTip.Background}" />
        <Setter Property="Foreground" Value="{StaticResource Brush.ToolTip.Text}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.ToolTip.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Style.Resources>
            <SolidColorBrush x:Key="Brush.Text.Primary" Color="{StaticResource Palette.ColorTextPrimary}" />
            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="{StaticResource Brush.ToolTip.Text}" />
            </Style>
        </Style.Resources>
    </Style>

    <Style TargetType="{x:Type ContextMenu}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.Menu.Background}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Menu.Border}" />
    </Style>

    <Style TargetType="{x:Type Menu}">
        <Setter Property="Background" Value="{StaticResource Brush.Menu.Background}" />
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border.Default}" />
    </Style>

    <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
        <Setter Property="Margin" Value="0,6,0,6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Separator}">
                    <Grid Height="8"
                          Background="{StaticResource Brush.Menu.Background}"
                          SnapsToDevicePixels="True">
                        <Border Height="1"
                                VerticalAlignment="Center"
                                Background="{StaticResource Brush.Border.Default}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type MenuItem}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
        <Setter Property="Background" Value="{StaticResource Brush.Menu.Background}" />
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border.Default}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="12,6,12,6" />
        <Style.Resources>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter x:Name="HeaderHost"
                                          Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          ContentSource="Header"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Bottom"
                           HorizontalOffset="0"
                           VerticalOffset="0"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource Brush.Panel.Primary.Background.Solid}"
                                BorderBrush="{StaticResource Brush.Border.Default}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Menu.Item.Background.Hover}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Border.Hover}" />
                        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}" />
                    </Trigger>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Menu.Item.Background.Hover}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Border.Hover}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Subtle}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.TopLevelItemTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter Margin="{TemplateBinding Padding}"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          RecognizesAccessKey="True" />
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Menu.Item.Background.Hover}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Border.Hover}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Subtle}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.SubmenuHeaderTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ContentPresenter Grid.Column="1"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              RecognizesAccessKey="True"
                                              ContentSource="Header" />
                            <Path x:Name="Glyph"
                                  Grid.Column="2"
                                  Margin="10,0,0,0"
                                  Width="6"
                                  Height="10"
                                  Fill="{StaticResource Brush.Accent.Primary}"
                                  Stretch="Uniform"
                                  RenderTransformOrigin="0.5,0.5"
                                  Data="M0,0 L0,10 6,5 Z"
                                  FlowDirection="LeftToRight" />
                        </Grid>
                    </Border>
                    <Popup x:Name="PART_Popup"
                           Placement="Right"
                           HorizontalOffset="2"
                           VerticalOffset="-3"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade">
                        <Border x:Name="SubMenuBorder"
                                Background="{StaticResource Brush.Menu.Submenu.Background}"
                                BorderBrush="{StaticResource Brush.Border.Default}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                            <ScrollViewer CanContentScroll="True">
                                <StackPanel Margin="0"
                                            IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Cycle" />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Menu.Item.Background.Hover}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Border.Hover}" />
                    </Trigger>
                    <Trigger Property="IsSubmenuOpen" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Menu.Item.Background.Hover}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Border.Hover}" />
                    </Trigger>
                    <Trigger Property="FlowDirection" Value="RightToLeft">
                        <Setter TargetName="Glyph" Property="RenderTransform">
                            <Setter.Value>
                                <ScaleTransform ScaleX="-1" />
                            </Setter.Value>
                        </Setter>
                        <Setter TargetName="PART_Popup" Property="Placement" Value="Left" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Subtle}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            <ControlTemplate x:Key="{x:Static MenuItem.SubmenuItemTemplateKey}"
                             TargetType="{x:Type MenuItem}">
                <Grid SnapsToDevicePixels="True">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          RecognizesAccessKey="True" />
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Menu.Item.Background.Hover}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Border.Hover}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Subtle}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Style.Resources>
    </Style>
</ResourceDictionary>
